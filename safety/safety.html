<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1,user-scalable=no">
    <!-- 禁止浏览器从本地缓存中调阅页面。--> 
    <meta http-equiv="pragram" content="no-cache"> 
    <!--网页不保存在缓存中，每次访问都刷新页面。--> 
    <meta http-equiv="cache-control" content="no-cache, must-revalidate"> 
    <!--同上面意思差不多，必须重新加载页面--> 
    <meta http-equiv="expires" content="0"> 
    <!-- Mobile Devices Support @begin -->
    <meta content="telephone=no, address=no" name="format-detection">
    <meta name="apple-mobile-web-app-capable" content="yes" /> <!-- apple devices fullscreen -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <script type="text/javascript" src="js/jquery-2.2.0.js"></script>
    <script type="text/javascript" src="js/jquery.mobile.js"></script>
    <script type="text/javascript" src="js/loading.js"></script>
    <link rel="stylesheet" href="css/jquery.mobile.css">
    <link rel="stylesheet" href="css/style.css">
  <title>空中联盟</title>
  <style>
    
  </style>
</head>
<body>

    <div data-role="page" id="pageone" date-dom-cache="true">
      <div class="load-box load">
        <div class="text">loading <span id="number">0%</span> <a class="start hide" href="#page20" rel="extrenal" data-ajax="false" date-transition="fade">准备完毕</a></div>
      </div>
    </div>
    <div data-role="page" id="page20" class="" >
      <div>
        <video src="./img/s1.mp4" class="video1" ></video> 
      </div>
        
    </div>

    <div data-role="page" id="pagethree" class="main_third" >
          <div class="btn-box">
            <img class="btn" src="./img/btn.png">
          </div>
          <div class="count-down">
            <ul>
              <li class="count_0 count">
                <img now="2" src="./img/2.png">
              </li>
              <li class="count_1 count">
                <img now="4" src="./img/4.png">
              </li>
              <li class="symbol">
                <img  src="./img/symbol.png">
              </li>
              <li class="count_2 count">
                <img now="0" src="./img/0.png">
                
                
              </li>
              <li class="count_3 count">
                <img now="0" src="./img/0.png">
                
              </li>
            </ul>
          </div>
      </div>
    <div data-role="page" id="pagefour">
      <div>
        <video src="./img/s2.mp4" class="video2" ></video> 
      </div>
    </div>
    <div data-role="page" id="pagefive" style="background-color:#000;"><p class="die">你死了</p></div>
</body>
</html>
<script type="text/javascript">
document.querySelector('body').addEventListener('touchstart', function (ev) {
    event.preventDefault();
});

var time_array = {
    '0':'./img/0.png',
    '1':'./img/1.png',
    '2':'./img/2.png',
    '3':'./img/3.png',
    '4':'./img/4.png',
    '5':'./img/5.png',
    '6':'./img/6.png',
    '7':'./img/7.png',
    '8':'./img/8.png',
    '9':'./img/9.png',

  };
  var timer ;
function count_down(){
  var count_0 = $('.count_0').find('img').attr('now');
  var count_1 = $('.count_1').find('img').attr('now');
  var count_2 = $('.count_2').find('img').attr('now');
  var count_3 = $('.count_3').find('img').attr('now');

 
  var minutes = count_0+''+count_1;
  var seconds = count_2+''+count_3;

  minute=Math.floor(minutes),
  second=Math.floor(seconds);//时间默认值  
  intDiff = minute*60; 
  timer = window.setInterval(function(){

      if(intDiff > 0){
          minute = Math.floor(intDiff / 60) ;



          second = Math.floor(intDiff- (minute * 60));
      }

      count = {}
      if (minute <= 9) {
        count[1] = minute;
        minute = '0' + minute;
        count[0] = '0'
        
      


      }else{
        minute_string = minute+'';
        count[0] = minute_string.substr(0,1)
        count[1] = minute_string.substr(1,1)
      }
   
      if (second <= 9){
        second = '0' + second;
        count[2] = '0'
        count[3] = second;
      }else{
        second_string = second+'';
        count[2] = second_string.substr(0,1)
        count[3] = second_string.substr(1,1)
      }
      // console.log(minute+':'+second)
      // console.log(second)
      intDiff--;
      if(intDiff<0){
        
        minute = '00';
        second = '00'
        clearInterval(timer)
        $.mobile.changePage('#pagefive','fade');
      }
      for (var i = 0; i<4 ; i++) {
        
        set_time(i,count[i]);
      }
      }, 1);
  } 


  function set_time(index,num){
    $('.count_'+index).find('img').attr('now',num)
    img = time_array[num];
    $('.count_'+index).find('img').attr('src',img);
  }



$('.start').on('touchstart',function(){
  console.log(1)
  $('.video1').trigger('play');
})

$('.btn').on('touchstart',function(){
        

  clearInterval(timer)
  $.mobile.changePage('#pagefour','fade');
  $('.video2').trigger('play');



})
$('.video1').on('ended',function(){
  
  $.mobile.changePage('#pagethree','fade');
  count_down();
})
</script>
