<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>多乐士</title>
		<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1,user-scalable=no">
		<!-- 禁止浏览器从本地缓存中调阅页面。--> 
		<meta http-equiv="pragram" content="no-cache"> 
		<!--网页不保存在缓存中，每次访问都刷新页面。--> 
		<meta http-equiv="cache-control" content="no-cache, must-revalidate"> 
		<!--同上面意思差不多，必须重新加载页面--> 
		<meta http-equiv="expires" content="0"> 
		<!-- Mobile Devices Support @begin -->
		<meta content="telephone=no, address=no" name="format-detection">
		<meta name="apple-mobile-web-app-capable" content="yes" /> <!-- apple devices fullscreen -->
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<script type="text/javascript" src="js/jquery-2.2.0.js"></script>
		<script type="text/javascript" src="js/common.js"></script>
		<link rel="stylesheet" href="css/style.css">
		<link rel="stylesheet" href="css/index.css">
	</head>
	<body>
		<div class="pager bg-1">
			<div class="element-box back-btn" style="padding-bottom:7%">
				<a href=""><img src="img/back_btn.png"></a>
			</div>
			<div class="face-box center-box male-face">
			</div>
			<div class="sex-box center-box">
				<a href="javascript:void(0);" class="active sex-btn sex-male"></a>
				<a href="javascript:void(0);" class="sex-btn sex-female"></a>
			</div>
			<!-- height:62% -->
			<div class="form-box center-box" style="height:298px;">
				<form style="height:65%">
					<!-- 隐藏域是性别 	 -->
					<input type="hidden" class="sex-value">
					<div class="input-box">
						<label for="name" class="label-name">name</label>
						<input type="text" class="name-input input-element" placeholder="请输入用户名">								
					</div>
					<div class="input-box">
						<label for="nickname" class="label-nickname">nickname</label>
						<input type="text" class="nick-input input-element" placeholder="请输入昵称">
					</div>
					<div class="small-input">
						<div class="small-box">
							<label for="mobile" class="label-mobile">mobile</label>
							<input type="tel" class="mobile-input number-input input-element" placeholder="请输入手机号">	
						</div>
						<div class="code-div">
							<input type="tel" placeholder="验证码"  style="padding-left:11px;height:82%;"class="code-input number-input">
						</div>
						<div class="button-div">
							<button class="count-time code-btn"><strong>发送</strong></button>
						</div>
						
					
					</div>
					<div class="input-box">
						<label for="city" class="label-city">city</label>
						<div class="overflow-box select-box">
							<select class="select-left province-select">
								<option ></option>
								<option >北京</option>
								<option >上海</option>
								
							</select>
							<em>省</em>
						</div>
						
						
						<div class="overflow-box select-box">
							<select class="city-select">
								<option ></option>
								
							</select>
							<em>市</em>
						</div>
						
					</div>
					<div class="input-box">
						<label for="job" class="label-job">job</label>
						<input type="text" placeholder="请输入工作单位"class="job-input">
					</div>
					<div class="check-box">
						<input type="checkbox" class="check-element">
						<a href="javascript:void(0);" class="agreement-btn">我已阅读并同意接受《会员协议》</a>
					</div>
					<div class="submit-box">
						<button type="button">注&nbsp;&nbsp;册</button>
					</div>
				</form>
			</div>
		</div>
		<div class="pop-overlay tips-pop">
			<div class="close-btn close-js">
				<a href="javascript:void(0);"></a>
			</div>
			<p class="tips-in">请输入正确的手机号</p>
			<div class="btn-box close-js">
				<a href="javascript:void(0);">返&nbsp;&nbsp;&nbsp;回</a>
			</div>
		</div>
		<div class="pop-overlay agreement-pop">
			<div class="close-btn close-js">
				<a href="javascript:void(0);"></a>
			</div>
			<h4>会员协议</h4>
			<p class="agreement-p">
				xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx<br/>xxxxxxxxxxxxxx<br/>
				xxxxxxxxxxxxxxxxx<br/>xxxxxxxxxxxxxxxxxxxxxxxx<br/>
			</p>
		</div>
		<div class="pop-overlay success-pop">
			<div class="close-btn close-js">
				<a href="javascript:void(0);"></a>
			</div>
			<h4>恭喜您，<br/>成功注册加入多乐士设计师工会！</h4>
			<p class="success-p">
				*立即认证，您可获得价值188元的多乐士经典配色手册一本<br/>
				*完成**任务，您可获得**勋章<br />
				*参加**活动，上传作品，您可获得**积分
			</p>
			<div class="btn-box">
				<a href="center.html">前往我的公会</a>
			</div>
		</div>
	    <div class="pop-overlay success-pop-invited" >
			<div class="close-btn close-js">
				<a href="javascript:void(0);"></a>
			</div>
			<h4>恭喜!<br/>成功注册加入多乐士设计师工会！</h4>
			<p class="success-p">
				您可长按二维码关注“多乐士”，了解更多会员信息
			</p>
			<div class="img-box">
				<img src="img/keycode.jpg">
			</div>
			<p class="p-bottom">
				您的好友Marie Simpson成功邀请您，
<br/>您也可以邀请您的朋友一起加入！
			</p>
			<div class="btn-box close-js" >
				<a href="javascript:void(0);">返回</a>
			</div>
		</div>
	</body>
	<script>
		$(function(){
			var height = $('.small-box').height()

			$('.small-input .code-div').css('height',height)
			$('.small-input button').css('height',height)
			
			//性别默认值
			$('.sex-value').val(1)

			$('.sex-btn').bind('touchend',function(e){
				var index = $(this).index();
				$('.sex-btn').removeClass('active')
				$(this).addClass('active')
				if(index==0){
					$('.face-box').removeClass('female-face').addClass('male-face')
					$('.sex-value').val(1)
				}else{
					$('.face-box').removeClass('male-face').addClass('female-face')
					$('.sex-value').val(0)

				}
			})
			$('.check-element').bind('change',function(){
				if($(this).is(':checked')){
					$('.agreement-btn').addClass('active')
				}else{
					$('.agreement-btn').removeClass('active')

				}
			})
			$('.code-btn').bind('touchend',function(e){
				e.stopPropagation();
				if($(this).attr('disabled')!='disabled'){

					var that = $(this);
					var mobile = $('.mobile-input').val();
					if(!mobileVerify(mobile)){
						$('.tips-pop').find('p').html('请输入正确的手机号')
						$('.tips-pop').show();
					}else{
						
						//手机号通过验证 发送验证码
						if(sendVcode()){
							//如果发送成功 验证码按钮不能按
							
							$(that).attr('disabled',true);
							
							var time = 60;
							var timer = setInterval(function(){
								if(time==0){
									
									$('.count-time').html('<strong>发送</strong>')
									$(that).attr('disabled',false)
									clearInterval(timer);
								}else{

									$('.count-time').html('<span>'+(--time)+'秒</span>')
									
								}
							},1000)
						}

					}
				}
				
			})
			//发送验证码方法
			function sendVcode(){
				return true;
			}

			//验证码验证
			function vcodeVerify(){
				return true;
			}

			
			function mobileVerify(value){
				var mobile=/^1[3|4|5|7|8]\d{9}$/;
				if(mobile.test(value)){
					return true;
				}else{
					return false;
				}
			}


			$('.agreement-btn').bind('touchend',function(){
				$('.agreement-pop').show();
			})


			$('.form-box .submit-box button').bind('touchend',function(){
				var inputs = $('input');
				var mobile = $('.mobile-input').val();
				
				for (var i = 0; i <inputs.length; i++) {
					
					if(!$(inputs).eq(i).val()){
						$('.tips-pop p').html('账户信息未完善，<br/>请返回页面继续补充信息再审核！')
						$('.tips-pop').show();
						return;
					}else if($(inputs).eq(i).hasClass('mobile-input')){
						if(!mobileVerify(mobile)){
							$('.tips-pop').find('p').html('请输入正确的手机号')
							$('.tips-pop').show();
							return 
						}
					}
				};
				var selects = $('select');
				for (var i = 0; i <selects.length; i++) {
					if(!$(selects).eq(i).val()){
						$('.tips-pop p').html('账户信息未完善，<br/>请返回页面继续补充信息再审核！')
						$('.tips-pop').show();
						return;
					}
				};
				//验证码验证
				if(!vcodeVerify()){
					$('.tips-pop p').html('账户信息未完善，<br/>请返回页面继续补充信息再审核！')
					$('.tips-pop').show();
					return;
				}

				if(!$('input.check-element').is(':checked')){
					$('.tips-pop p').html('账户信息未完善，<br/>请返回页面继续补充信息再审核！')
					$('.tips-pop').show();
					return;

				}

				//提交数据
				alert(1)
				//如果提交成功执行
				$('.success-pop').show();
				//如果是被邀请的成功
				// $('.success-pop-invited').show();

			})



			//城市关联数组模拟
			$('.province-select').bind('change',function(){
				var array = new Array();
				array = {
					'北京':[
						'东城',
						'西城'
					],
					'上海':[
						'闸北',
						'杨浦'
					]

				};
				var value = $(this).val();
				
				var city = array[value];
				$('.city-select').html('<option></option>');
				for (var i = 0; i < city.length; i++) {
					
					$('.city-select').append('<option>'+city[i]+'</option>')
				};
			})


			var inputWidth = $('.input-box').outerWidth()-57;
			var smallWidth = inputWidth*0.7;
			var codeWidth = inputWidth*0.27;
			$('.small-box').css('width',smallWidth)
			$('.code-div').css('width',codeWidth)

			$('.select-box em').filter(function(){

				var height = $('select').height()-3
				var height = height+'px'
				$(this).css('line-height',height);
			})

			

		})
		
		
		
		
	</script>
</html>
















